#N canvas -1034 327 755 577 12;
#X obj 215 39 loadbang;
#X obj 215 67 s load;
#X msg 268 66 \; pd dsp 1;
#X obj 233 165 dac~;
#N canvas 0 149 676 614 windows 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array hann 441 float 1;
#A 0 5.58197e-05 0.000211179 0.000466049 0.000820369 0.00127408 0.00182706
0.00248876 0.00325206 0.00411421 0.00507513 0.00613457 0.00729233 0.00855508
0.00992075 0.0113839 0.0129444 0.0146018 0.0163559 0.0182106 0.0201685
0.022222 0.0243706 0.0266139 0.0289515 0.0313846 0.0339206 0.0365494
0.0392705 0.0420832 0.0449871 0.0479817 0.0510767 0.0542615 0.0575351
0.0608967 0.0643458 0.0678816 0.0715112 0.0752289 0.079031 0.082917
0.086886 0.0909373 0.0950752 0.0992984 0.103601 0.107983 0.112443 0.11698
0.121597 0.126294 0.131067 0.135912 0.140831 0.14582 0.150881 0.15602
0.161227 0.166501 0.171841 0.177247 0.182717 0.188257 0.19386 0.199524
0.205248 0.211031 0.216871 0.222772 0.22873 0.234743 0.240808 0.246925
0.253092 0.259311 0.265581 0.271898 0.27826 0.284667 0.291116 0.297608
0.304145 0.31072 0.317332 0.323982 0.330666 0.337384 0.344138 0.350924
0.357738 0.364582 0.371452 0.378348 0.38527 0.392216 0.399183 0.406171
0.413177 0.4202 0.427241 0.434296 0.441365 0.448445 0.455536 0.462635
0.469742 0.476856 0.483974 0.491096 0.498219 0.505343 0.512465 0.519585
0.526701 0.533812 0.540915 0.548011 0.555097 0.562171 0.569233 0.57628
0.583313 0.590329 0.597327 0.604304 0.611259 0.618192 0.625102 0.631987
0.638845 0.645674 0.652473 0.659241 0.665977 0.67268 0.679349 0.685981
0.692573 0.699126 0.70564 0.712113 0.718544 0.72493 0.731267 0.737558
0.743801 0.749996 0.756142 0.762236 0.768272 0.774255 0.780182 0.786054
0.791869 0.797626 0.803318 0.808948 0.814517 0.820022 0.825464 0.830842
0.836149 0.841386 0.846554 0.851654 0.856683 0.861642 0.866525 0.87133
0.876061 0.880717 0.885297 0.8898 0.894225 0.898563 0.902821 0.906999
0.911096 0.915111 0.919044 0.922885 0.926639 0.930309 0.933894 0.937391
0.940802 0.944118 0.947342 0.950477 0.953522 0.956477 0.959341 0.962108
0.964778 0.967354 0.969838 0.972228 0.974525 0.976724 0.978819 0.980819
0.982723 0.984531 0.986243 0.987857 0.989363 0.990772 0.992083 0.993295
0.99441 0.995426 0.996334 0.997141 0.997848 0.998457 0.998966 0.999376
0.99968 0.999879 0.999978 0.999978 0.999879 0.999679 0.999376 0.998966
0.998457 0.997848 0.99714 0.996333 0.995426 0.994409 0.993295 0.992082
0.990771 0.989362 0.987857 0.986242 0.98453 0.982722 0.980818 0.978818
0.976722 0.974523 0.972227 0.969837 0.967353 0.964776 0.962107 0.959339
0.956475 0.95352 0.950475 0.94734 0.944116 0.9408 0.937389 0.933891
0.930307 0.926637 0.922882 0.919042 0.915109 0.911094 0.906997 0.902818
0.89856 0.894222 0.889797 0.885294 0.880714 0.876058 0.871327 0.866522
0.861639 0.85668 0.851651 0.846551 0.841383 0.836146 0.830839 0.825461
0.820019 0.814513 0.808945 0.803315 0.797622 0.791865 0.786051 0.780179
0.774251 0.768269 0.762232 0.756138 0.749993 0.743798 0.737554 0.731263
0.724926 0.71854 0.712109 0.705636 0.699123 0.692569 0.685977 0.679345
0.672676 0.665973 0.659237 0.652469 0.64567 0.638841 0.631983 0.625098
0.618188 0.611255 0.604299 0.597323 0.590325 0.583309 0.576276 0.569229
0.562167 0.555093 0.548007 0.540911 0.533807 0.526697 0.519581 0.512461
0.505338 0.498215 0.491092 0.48397 0.476852 0.469738 0.462631 0.455531
0.448441 0.441361 0.434292 0.427236 0.420196 0.413173 0.406167 0.399179
0.392212 0.385266 0.378344 0.371448 0.364578 0.357734 0.350919 0.344134
0.33738 0.330662 0.323978 0.317328 0.310716 0.304141 0.297605 0.291112
0.284663 0.278257 0.271894 0.265578 0.259307 0.253088 0.246921 0.240804
0.234739 0.228727 0.222768 0.216867 0.211027 0.205245 0.199521 0.193857
0.188254 0.182714 0.177243 0.171838 0.166497 0.161223 0.156016 0.150878
0.145817 0.140827 0.135909 0.131063 0.126291 0.121593 0.116977 0.11244
0.10798 0.103598 0.0992954 0.0950722 0.0909344 0.086883 0.0829141 0.0790282
0.075226 0.0715085 0.0678789 0.0643432 0.0608941 0.0575325 0.054259
0.0510742 0.0479794 0.0449848 0.042081 0.0392683 0.0365473 0.0339186
0.0313826 0.0289496 0.026612 0.0243689 0.0222203 0.0201669 0.018209
0.0163543 0.0146004 0.012943 0.0113826 0.00991952 0.00855398 0.00729129
0.00613356 0.00507423 0.00411341 0.00325134 0.00248814 0.00182652 0.00127363
0.000820011 0.00046578 0.00021103 5.57601e-05 0;
#X coords 0 1 440 0 200 140 1 0 0;
#X restore 383 47 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array crown 441 float 1;
#A 0 0.0356611 0.0712777 0.10689 0.142498 0.1781 0.213688 0.249272
0.284836 0.32039 0.355928 0.391445 0.42695 0.46242 0.497879 0.533304
0.568705 0.604082 0.639418 0.674739 0.710003 0.745247 0.780448 0.815606
0.850737 0.885803 0.920846 0.955822 0.990761 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0.99072
0.955781 0.920804 0.885761 0.850695 0.815564 0.780405 0.745205 0.709961
0.674697 0.639376 0.604041 0.568663 0.533262 0.497837 0.462378 0.426908
0.391402 0.355886 0.320348 0.284794 0.249229 0.213646 0.178057 0.142455
0.106848 0.0712351 0.0356185 3.77489e-07;
#X coords 0 1 440 0 200 140 1 0 0;
#X restore 383 267 graph;
#X text 363 177 0;
#X text 362 40 1;
#X text 363 397 0;
#X text 362 260 1;
#X obj 102 160 cos~;
#X obj 102 183 *~ -0.5;
#X obj 102 208 +~ 0.5;
#X msg 102 83 0 \, 1 10;
#X obj 102 131 vline~;
#X text 379 190 0;
#X text 568 192 441;
#X text 379 410 0;
#X text 568 412 441;
#X text 156 81 441 samples = 10 ms;
#X obj 108 473 clip~ 0 1;
#X obj 109 343 vline~;
#X obj 109 367 cos~;
#X floatatom 143 409 5 0 0 0 - - -;
#X text 181 409 higher values shorten ramps;
#X obj 68 36 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 71 278 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 93 35 make Hann window;
#X text 99 278 make crown;
#X obj 108 449 *~ 5;
#X msg 109 320 -0.25 \, 0.25 10;
#X floatatom 235 316 5 0 0 0 - - -;
#X msg 300 471 441;
#X msg 218 160 441;
#X obj 102 250 tabwrite~ hann;
#X obj 216 185 array size hann;
#X obj 108 509 tabwrite~ crown;
#X obj 298 496 array size crown;
#X obj 13 9 r load;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 30 0;
#X connect 9 0 10 0;
#X connect 10 0 6 0;
#X connect 16 0 32 0;
#X connect 17 0 18 0;
#X connect 18 0 25 0;
#X connect 19 0 25 1;
#X connect 21 0 9 0;
#X connect 21 0 29 0;
#X connect 21 0 30 0;
#X connect 22 0 26 0;
#X connect 22 0 28 0;
#X connect 22 0 32 0;
#X connect 25 0 16 0;
#X connect 26 0 17 0;
#X connect 27 0 18 0;
#X connect 28 0 33 0;
#X connect 29 0 31 0;
#X connect 34 0 21 0;
#X connect 34 0 22 0;
#X restore 67 68 pd windows;
#X obj 71 214 hsl 195 15 0 1 0 0 sample_offset sample_offset_rcv sample_offset
-2 -8 0 10 -262144 -1 -1 9700 1;
#X obj 73 254 hsl 128 15 0 1 0 0 offset_random offset_random_rcv offset_random
-2 -8 0 10 -262144 -1 -1 3175 1;
#X obj 74 390 hsl 128 15 0.001 1 0 0 grain_size grain_size_rcv grain_size
-2 -8 0 10 -262144 -1 -1 623 1;
#X obj 74 353 hsl 128 15 0 1 0 0 random_pitch random_pitch_rcv random_pitch
-2 -8 0 10 -262144 -1 -1 1270 1;
#X obj 279 444 hsl 128 15 0 1 0 0 random_panning random_panning_rcv
random_panning -2 -8 0 10 -262144 -1 -1 7620 1;
#X obj 279 412 hsl 128 15 0 1 0 0 global_pan global_pan_rcv global_pan
-2 -8 0 10 -262144 -1 -1 6350 1;
#X obj 71 427 hsl 128 15 0.002 1 0 0 grain_density grain_density_rcv
grain_density -2 -8 0 10 -262144 -1 -1 1247 1;
#X obj 71 274 tgl 15 0 reverse reverse_rcv reverse 17 7 0 10 -262144
-1 -1 0 1;
#X obj 325 254 vsl 15 128 0.01 1.4 1 0 volume volume_rcv volume 0 -9
0 10 -262144 -1 -1 11835 1;
#X obj 74 306 hsl 128 15 0 1 0 0 grain_pitch grain_pitch_rcv grain_pitch
-2 -8 0 10 -262144 -1 -1 3175 1;
#X obj 133 275 tgl 15 0 reverse_random reverse_random_rcv reverse_random
17 7 0 10 -262144 -1 -1 0 1;
#X obj 71 321 bng 15 250 50 0 reset_pitch reset_pitch_rcv reset_pitch
17 7 0 10 -262144 -1 -1;
#X obj 286 213 bng 15 250 50 0 play_one_grain play_one_grain_rcv play_one_grain
17 7 0 10 -262144 -1 -1;
#N canvas 630 216 563 427 settings 0;
#X obj 234 58 inlet;
#X obj 94 66 loadbang;
#X obj 328 175 s singlegrainvolume;
#X msg 328 150 0.8;
#X floatatom 101 308 5 0 0 0 - - -;
#X obj 100 334 s pitch_range;
#X text 142 306 default is 4 \, worth experimenting with;
#X obj 326 126 r load;
#X msg 97 95 \; grain_pitch_rcv 0.25 \; grain_size_rcv 0.05 \; sample_offset_rcv
0.5 \; offset_random_rcv 0.25 \; random_pitch_rcv 0.1 \; random_panning_rcv
0.6 \; global_pan_rcv 0.5 \; on_off_rcv 0 \; volume_rcv 1 \; num_channels_rcv
2 \; reverse_rcv 0 \; reverse_random_rcv 0 \; grain_density_rcv 0.1
\;;
#X connect 0 0 8 0;
#X connect 1 0 8 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 7 0 3 0;
#X restore 67 90 pd settings;
#X obj 233 117 receive~ grainOutL;
#X obj 258 141 receive~ grainOutR;
#X obj 69 163 tgl 30 0 on_off on_off_rcv empty 30 7 0 10 -4032 -1 -1
0 1;
#X obj 433 93 soundfiler;
#X floatatom 433 120 15 0 0 0 - - -;
#X obj 433 28 r load;
#X obj 433 147 s samplelength;
#X text 107 161 On Off;
#N canvas -1459 192 1298 675 input 0;
#X msg 63 64 in 11;
#X obj 63 90 s bela_setDigital;
#X obj 64 122 r bela_digitalIn11;
#X obj 64 168 delay 3;
#X obj 415 95 adc~ 3 4 5 6;
#X obj 987 585 dac~ 27 28 29 30;
#X obj 8 34 r load;
#X obj 100 285 % 2;
#X obj 64 257 f;
#X obj 41 285 sel 10;
#X obj 100 317 change;
#X obj 100 345 s on_off_rcv;
#X text 80 34 Button;
#X text 114 63 Set and read pin digital 0;
#X text 128 168 debounce;
#X text 141 286 toggle;
#X obj 64 145 sel 1;
#X obj 318 579 s sample_offset;
#X obj 564 581 s grain_size;
#X obj 442 580 s grain_density;
#X obj 692 580 s random_pitch;
#X text 275 135 FSR 1;
#X text 398 133 FSR 2;
#X text 521 136 Pot 1;
#X text 655 134 Pot 2;
#X obj 318 339 snapshot~;
#X obj 442 336 snapshot~;
#X obj 564 337 snapshot~;
#X obj 692 331 snapshot~;
#X obj 833 248 r load;
#X obj 833 275 1;
#X obj 318 539 spigot;
#X obj 442 540 spigot;
#X obj 564 542 spigot;
#X obj 692 538 spigot;
#X obj 357 516 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 481 517 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 603 519 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 731 517 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 794 451 r load;
#X obj 794 477 1;
#X obj 442 163 *~ -1;
#X obj 442 185 +~ 1;
#X obj 318 135 lop~ 5;
#X obj 442 133 lop~ 5;
#X obj 564 136 lop~ 5;
#X obj 692 134 lop~ 5;
#X obj 442 439 * 0.5;
#X obj 442 467 change;
#X obj 318 210 clip~ 0.001 1;
#X obj 692 206 clip~ 0.001 1;
#X obj 318 455 change;
#X obj 564 458 change;
#X obj 692 455 change;
#X obj 100 257 + 1;
#X obj 986 614 print;
#X obj 318 394 int;
#X obj 318 372 * 1000;
#X obj 318 417 * 0.001;
#X obj 442 391 int;
#X obj 442 369 * 1000;
#X obj 442 414 * 0.001;
#X obj 564 396 int;
#X obj 564 374 * 1000;
#X obj 564 419 * 0.001;
#X obj 692 398 int;
#X obj 692 376 * 1000;
#X obj 692 421 * 0.001;
#X obj 8 224 0;
#X text 734 397 truncate incoming value to get only 3 decimals;
#X text 913 303 <-- Increase this value for sensors' sensitivity;
#X text 763 515 <-- Switch sensors on & off;
#X text 986 561 Use print and dac~ (oscilloscope) to debug;
#X obj 833 302 metro 150;
#X text 804 205 <-- Change the range of each sensor with [clip~];
#X obj 564 207 clip~ 0.001 0.4;
#X obj 442 208 clip~ 0.085 1;
#X connect 0 0 1 0;
#X connect 2 0 16 0;
#X connect 3 0 8 0;
#X connect 4 0 43 0;
#X connect 4 1 44 0;
#X connect 4 2 45 0;
#X connect 4 3 46 0;
#X connect 6 0 0 0;
#X connect 6 0 68 0;
#X connect 7 0 10 0;
#X connect 8 0 54 0;
#X connect 9 0 68 0;
#X connect 10 0 11 0;
#X connect 16 0 3 0;
#X connect 25 0 57 0;
#X connect 26 0 60 0;
#X connect 27 0 63 0;
#X connect 28 0 66 0;
#X connect 29 0 30 0;
#X connect 30 0 73 0;
#X connect 31 0 17 0;
#X connect 32 0 19 0;
#X connect 33 0 18 0;
#X connect 34 0 20 0;
#X connect 35 0 31 1;
#X connect 36 0 32 1;
#X connect 37 0 33 1;
#X connect 38 0 34 1;
#X connect 39 0 40 0;
#X connect 40 0 38 0;
#X connect 40 0 37 0;
#X connect 40 0 36 0;
#X connect 40 0 35 0;
#X connect 41 0 42 0;
#X connect 42 0 76 0;
#X connect 43 0 49 0;
#X connect 44 0 41 0;
#X connect 45 0 75 0;
#X connect 46 0 50 0;
#X connect 47 0 48 0;
#X connect 48 0 32 0;
#X connect 49 0 25 0;
#X connect 50 0 28 0;
#X connect 51 0 31 0;
#X connect 52 0 33 0;
#X connect 53 0 34 0;
#X connect 54 0 7 0;
#X connect 54 0 8 1;
#X connect 54 0 9 0;
#X connect 56 0 58 0;
#X connect 57 0 56 0;
#X connect 58 0 51 0;
#X connect 59 0 61 0;
#X connect 60 0 59 0;
#X connect 61 0 47 0;
#X connect 62 0 64 0;
#X connect 63 0 62 0;
#X connect 64 0 52 0;
#X connect 65 0 67 0;
#X connect 66 0 65 0;
#X connect 67 0 53 0;
#X connect 68 0 8 1;
#X connect 73 0 28 0;
#X connect 73 0 27 0;
#X connect 73 0 26 0;
#X connect 73 0 25 0;
#X connect 75 0 27 0;
#X connect 76 0 26 0;
#X restore 67 112 pd input;
#X floatatom 68 448 5 0 0 0 - - -;
#X msg 433 64 read -resize Stayonthejob.wav poly_grain;
#X obj 601 97 table poly_grain;
#N canvas 377 155 709 564 granular 0;
#X floatatom 76 486 5 0 0 0 - - -;
#X text 14 488 channels;
#X obj 74 461 r num_channels_rcv;
#X obj 76 507 s num_channels;
#X obj 27 220 metro 1000;
#X obj 87 103 r grain_density;
#X msg 33 47 next 1;
#X obj 34 26 r mastergrainbang;
#X obj 87 165 * 1000;
#X obj 27 247 random 100;
#X floatatom 27 268 5 0 0 0 - - -;
#X obj 32 301 < 100;
#X obj 32 329 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 32 349 sel 1;
#X obj 34 375 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 179 221 r grainplay_chance;
#X obj 100 276 * 100;
#X obj 241 392 * 44100;
#X floatatom 242 422 15 0 0 0 - - -;
#X obj 236 322 r grain_size;
#X obj 241 446 s grainsize;
#X floatatom 88 189 5 0 0 0 - - -;
#X obj 241 354 + 0.01;
#X obj 27 138 r on_off;
#X obj 28 166 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 27 196 change;
#X obj 395 178 catch~ grainoutL;
#X obj 536 176 catch~ grainoutR;
#X obj 395 219 *~;
#X obj 536 226 *~;
#X obj 551 199 r volume;
#X obj 40 397 s mastergrainbang;
#X obj 95 345 r play_one_grain;
#X obj 395 243 send~ grainOutL;
#X obj 536 246 send~ grainOutR;
#X floatatom 181 242 5 0 0 0 - - -;
#X obj 150 160 * -1;
#X obj 150 182 + 1;
#X text 174 45 number of instances of grain_mono \, if Bela complains
with a lot of warnings "blocks dropped" \, try to decrease it (e.g.
to 6 or 4);
#X obj 33 69 clone grain_mono 10;
#X connect 0 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 9 0;
#X connect 5 0 8 0;
#X connect 5 0 36 0;
#X connect 6 0 39 0;
#X connect 7 0 6 0;
#X connect 8 0 21 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 31 0;
#X connect 15 0 35 0;
#X connect 16 0 11 1;
#X connect 17 0 18 0;
#X connect 18 0 20 0;
#X connect 19 0 22 0;
#X connect 21 0 4 1;
#X connect 22 0 17 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 4 0;
#X connect 26 0 28 0;
#X connect 27 0 29 0;
#X connect 28 0 33 0;
#X connect 29 0 34 0;
#X connect 30 0 28 1;
#X connect 30 0 29 1;
#X connect 32 0 14 0;
#X connect 36 0 37 0;
#X connect 37 0 16 0;
#X restore 66 47 pd granular;
#N canvas 177 141 450 300 credits 0;
#X text 40 64 by Giacomo Lepri giacomolepri.com based on yann seznec's
granulator https://github.com/yannseznec/Granular-Sampler yannseznec.com
, f 49;
#X restore 68 525 pd credits;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 11 0 28 0;
#X connect 19 0 3 0;
#X connect 20 0 3 1;
#X connect 22 0 23 0;
#X connect 23 0 25 0;
#X connect 24 0 29 0;
#X connect 29 0 22 0;
